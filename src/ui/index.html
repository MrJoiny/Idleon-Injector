<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IDLEON // INJECTOR</title>
    <!-- Fonts: Rajdhani for technical headers, JetBrains Mono for data -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&family=Rajdhani:wght@500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Background Grid & Noise -->
    <div class="hud-background">
        <div class="grid-overlay"></div>
        <div class="vignette"></div>
    </div>

    <div class="app-layout">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="brand">
                <div class="brand-logo">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" style="width: 1.25em; height: 1.25em;">
                        <path
                            d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z">
                        </path>
                    </svg>
                </div>
                <div class="brand-text">
                    <span>IDLEON</span>
                    <span class="highlight">INJECTOR</span>
                </div>
            </div>

            <div class="nav-menu">
                <button class="tab-button active" data-tab="cheats-tab">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <rect x="2" y="6" width="20" height="12" rx="2"></rect>
                        <path d="M6 12h4m-2-2v4m7-1h.01m3-2h.01"></path>
                    </svg>
                    <span>CHEATS</span>
                </button>

                <button class="tab-button" data-tab="options-account-tab">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="3" y1="9" x2="21" y2="9"></line>
                        <line x1="9" y1="21" x2="9" y2="9"></line>
                    </svg>
                    <span>ACCOUNT OPTIONS</span>
                </button>

                <button class="tab-button" data-tab="config-tab">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path
                            d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z">
                        </path>
                        <circle cx="12" cy="12" r="3"></circle>
                    </svg>
                    <span>CONFIG</span>
                </button>

                <button class="tab-button" data-tab="devtools-tab">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="4 17 10 11 4 5"></polyline>
                        <line x1="12" y1="19" x2="20" y2="19"></line>
                    </svg>
                    <span>CHROMEDEBUG</span>
                </button>
            </div>

            <div class="system-status">
                <div class="status-dot"></div>
                <span id="system-status-text">SYSTEM ONLINE</span>
            </div>
        </nav>

        <!-- Main Viewport -->
        <main class="viewport">
            <!-- Header for Tab Title (Dynamic) -->
            <header class="viewport-header">
                <h2 id="active-view-title">CHEATS</h2>
            </header>

            <div id="tab-content">
                <!-- CHEATS TAB -->
                <div id="cheats-tab" class="tab-pane active">
                    <div class="control-bar">
                        <div class="search-wrapper">
                            <span class="search-icon">ᐳ</span>
                            <input type="text" id="filter-input" placeholder="SEARCH_COMMANDS...">
                        </div>
                    </div>

                    <div id="cheat-buttons" class="grid-layout">
                        <!-- Cheat buttons injected here -->
                    </div>
                    <div id="loading-cheats" class="loader-box">
                        <div class="spinner"></div>
                        <span>INITIALIZING...</span>
                    </div>
                </div>

                <!-- CONFIG TAB -->
                <div id="config-tab" class="tab-pane">
                    <div class="sub-nav">
                        <button class="config-sub-tab-button active" data-sub-tab="cheatconfig-pane">CHEATS</button>
                        <button class="config-sub-tab-button" data-sub-tab="startupcheats-pane">STARTUP</button>
                        <button class="config-sub-tab-button" data-sub-tab="injectorconfig-pane">INJECTOR</button>
                    </div>

                    <div id="config-sub-tab-content" class="scroll-container">

                        <!-- Pane 1: Cheat Config -->
                        <div id="cheatconfig-pane" class="config-sub-tab-pane active">
                            <div class="panel-section" style="margin-bottom: 20px;">
                                <label for="cheatconfig-category-select"
                                    style="display:block; margin-bottom:5px; font-size:0.75rem; color:var(--c-text-dim);">CATEGORY
                                    FILTER</label>
                                <select id="cheatconfig-category-select">
                                    <option value="all">ALL SECTORS</option>
                                </select>
                            </div>
                            <div id="cheatconfig-options"></div>
                            <!-- This one existed, but let's ensure it uses the new loader style -->
                            <div id="loading-cheatconfig" class="loader-box hidden">
                                <div class="spinner"></div>
                                <span>LOADING CONFIG...</span>
                            </div>
                        </div>

                        <!-- Pane 2: Startup Cheats -->
                        <div id="startupcheats-pane" class="config-sub-tab-pane">
                            <div id="startupcheats-options"></div>
                            <!-- ADDED BACK: Missing ID causing the crash -->
                            <div id="loading-startupcheats" class="loader-box hidden">
                                <div class="spinner"></div>
                                <span>LOADING STARTUP...</span>
                            </div>
                        </div>

                        <!-- Pane 3: Injector Config -->
                        <div id="injectorconfig-pane" class="config-sub-tab-pane">
                            <div class="warning-banner"
                                style="margin-bottom:20px; color:var(--c-warning); border:1px solid var(--c-warning); padding:10px; background:rgba(255,183,0,0.1); font-size:0.8rem;">
                                ⚠ RESTART REQUIRED FOR CHANGES TO APPLY
                            </div>
                            <div id="injectorconfig-options"></div>
                            <!-- ADDED BACK: Missing ID causing the crash -->
                            <div id="loading-injectorconfig" class="loader-box hidden">
                                <div class="spinner"></div>
                                <span>LOADING INJECTOR...</span>
                            </div>
                        </div>
                    </div>

                    <div class="action-bar">
                        <button id="update-config-button" class="btn-secondary">APPLY</button>
                        <button id="save-config-button" class="btn-primary">SAVE</button>
                    </div>
                </div>

                <!-- OPTIONS ACCOUNT TAB -->
                <div id="options-account-tab" class="tab-pane">
                    <div class="danger-zone-header">
                        <p>ACCESSING RAW GAME ATTRIBUTES. INVALID DATA MAY CAUSE CORRUPTION.</p>
                    </div>

                    <div class="control-bar">
                        <button id="load-options-button" class="btn-primary">LOAD DATA</button>
                        <button id="refresh-options-button" class="btn-secondary hidden">REFRESH</button>

                        <div class="spacer"></div>

                        <label class="toggle-switch">
                            <input type="checkbox" id="hide-ai-options">
                            <span class="slider"></span>
                            <span class="label">HIDE AI</span>
                        </label>

                        <input type="text" id="options-filter" class="compact-input hidden"
                            placeholder="FILTER_INDEX...">
                    </div>

                    <div id="options-account-content" class="hidden">
                        <div class="scroll-container option-list-container">
                            <div id="documented-options"></div>
                        </div>
                    </div>
                    <p id="loading-options" class="loader-box hidden">DECRYPTING...</p>
                </div>

                <!-- DEVTOOLS TAB -->
                <div id="devtools-tab" class="tab-pane">
                    <div class="terminal-wrapper">
                        <iframe id="devtools-iframe"></iframe>
                        <div id="devtools-message">ESTABLISHING UPLINK...</div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div id="status-message"></div>

    <!-- Modal -->
    <div id="options-warning-modal" class="modal hidden">
        <div class="modal-box">
            <div class="modal-header">
                <h3>⚠ CRITICAL WARNING</h3>
            </div>
            <div class="modal-body">
                <p>You are entering the Options List Editor.</p>
                <p>Modifying these indices directly bypasses game logic safety checks. Incorrect types
                    <strong>WILL</strong> corrupt your save file.
                </p>
                <p>Proceed with caution.</p>
            </div>
            <div class="modal-footer">
                <button id="modal-cancel" class="btn-secondary">ABORT</button>
                <button id="modal-accept" class="btn-danger">CONFIRM ACCESS</button>
            </div>
        </div>
    </div>

    <script src="utils.js" type="module"></script>
    <script src="optionsAccount.js" type="module"></script>
    <script src="main.js" type="module"></script>
</body>

</html>